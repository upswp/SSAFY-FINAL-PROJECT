![logo](https://user-images.githubusercontent.com/70404643/119038416-0dcfa880-b9ee-11eb-934d-0e1f29a4b54a.png)

## 🌈 [THXSTORE_Link✌](https://k4b202.p.ssafy.io)

---



|   Name   | 박대현                               | 성정욱                                            | 박상우                             | 최동식                                     | 황영준                                                       |
| :------: | ------------------------------------ | ------------------------------------------------- | ---------------------------------- | ------------------------------------------ | ------------------------------------------------------------ |
| Profile  | ![박대현](image/단테.jpg)            | ![성정욱](image/KakaoTalk_20210415_001300581.jpg) | ![최동식](image/상우.png)          | ![최동식](image/동식.PNG)                  | ![황영준](https://user-images.githubusercontent.com/70404643/114732989-ee55b800-9d7d-11eb-9df3-c3378d6086cb.png) |
| Position | Frontend & UI/UX                     | Frontend & UI/UX                                  | 팀장 & Backend Develop             | Backend Develop & CI/CD                    | Backend Develop & CI/CD                                      |
|   Git    | [@daep93](https://github.com/daep93) | [@gluwein](https://github.com/gluwein)            | [@upswp](https://github.com/upswp) | [@pertus123](https://github.com/pertus123) | [@junjun0905](https://github.com/junjun0905)                 |

![프레젠테이션1](https://user-images.githubusercontent.com/70404643/117557397-71340f00-b0ad-11eb-92ea-f0218e87ab8b.png)

- ### THXSTORE Project를 함께하는 강철코딩팀을 소개합니다 !

  - **[에러와 매일 밤 싸운다.]** **최동식** 😤
    - 인간 디버깅이 될때까지 강철 멘탈로 해결해나아가는 
      THE 강한 SSAFY인이 되겠습니다. 화이팅!
  - **[항상 웃음으로 인사하는 친절한]** **성정욱** 😁
    - 온 종일 코딩하면서 말할 일이 없다보니 스크럼 미팅시간이 저의 유일한 탈출구 입니다. 
      이 시간만큼은 팀원들과 즐기고 싶어요!
  - **[프로젝트의 최전방에서 로직을 설계한다.]** **황영준** 🧐
    - 최적화와 완성도를 고려하는 개발자가 되겠습니다 !
  - **[솔루션은 나에게 맡겨라 프론트 저격수]** **박대현** 🤩
    - 문제가 무엇인지 정조준하는 개발자가 되겠습니다!
  - **[미친 텐션은 나를 이끌어]** **박상우** 😋
    - 이번 자율프로즉테로 가장 크게 성장하고 있습니다.
      취업과 프로젝트 모두를 성공하는 SSAFY인이 되보겠습니다.

- ### 강철코딩팀은 어떻게 협업하는지 궁금하신가요?! 아래 링크로 오세요!

  - [**강철코딩팀의 협업방법 보러가기! 😏**](https://upsw-p.tistory.com/55)



---

![introduce](https://user-images.githubusercontent.com/70404643/119045128-06140200-b9f6-11eb-9c7a-847d88d0027f.png)



---

## 😎 [UCC 보러가기 (준비중)]()

---

## 🚀 배포 플로우

![배포플로우](https://user-images.githubusercontent.com/70404643/119043218-c64c1b00-b9f3-11eb-9d0c-1a743a091c53.png)

## :video_game: 기술 스택

### 💻Back-End

  <details>
      <summary>Back 자세히 살펴보기 🔥</summary>
      <ul>
        <li>기술스택 ⚙</li>
      </ul>
      <ul>
          <li>Spring-Boot : 2.3.9</li>
          <li>Spring-Boot-Data-JPA</li>
          <li>spring-boot-starter-mail</li>
          <li>Spring Security</li>
          <li>spring-boot-starter-hateoas</li>
          <li>spring-boot-starter-validation</li>
          <li>spring-boot-starter-jdbc</li>
          <li>modelmapper : 2.3.8</li>
          <li>openvidu-java-client : 2.17.0</li>
          <li>spring-boot-starter-security</li>
          <li>jjwt : 0.9.1</li>
          <li>lombok</li>
          <li>mysql : 8.0.22</li>
          <li>h2 : 1.4.200</li>
          <li>pusher : 2.2.1</li>
          <li>JUnitParams : 1.1.1</li>
          <li>junit : 4.12</li>
          <li>jersey-multipart : 1.19.4</li>
          <li>spring-restdocs-asciidoctor : 2.0.3.RELEASE</li>
          <li>spring-restdocs-mockmvc : 2.0.3.RELEASE</li>
      </ul>
      <ul>
        <li>라이브러리 📚</li>
      </ul>
  </details>

### ✨Front-End

<details>
    <summary>Front 자세히 살펴보기 🌈</summary>
    <ul>
        <li>기술스택 ⚙</li>
    </ul>   
    <ul>
        <li>JS, HTML, CSS</li>
        <li>SCSS</li>
        <li>Vue.js @2.6.11</li>
    </ul>
    <li>--------------------------------------------------------------------------------------</li>
     <ul>
        <li>라이브러리 📚</li>
    </ul>   
    <ul>
        <li>fontawesome @2.0.2 : 아이콘 라이브러리</li>
        <li>axios @0.21.1 : Promise 기반 HTPP 클라이언트</li>
        <li>loadash @4.17.21 : debounce를 이용하기 위한 라이브러리</li>
        <li>vue-awesome-swiper @4.1.1 : 이미지 슬라이더 라이브러리</li>
        <li>eslint & prettier @6.7.2 : 협업을 위한 formatter 라이브러리</li>
        <li>sass-loader @10.1.1 : SASS/SCSS 적용을 위한 라이브러리</li>
    </ul>
</details>

### 🌏Infra

  <details>
      <summary>개발, CI/CD 자세히 살펴보기 🔥</summary>
      <ul>
          <li>AWS EC2 - Deploy Server</li>
          <li>AWS S3 - Image(File) Server</li>
          <li>AWS RDS - DB Server</li>
          <li>Jenkins </li>
          <li>GitLab</li>
          <li>Docker</li>
      </ul>
  </details>

-------------------------------------------------

## ⚙️ Install and Usage

#### 시스템 환경

thxstore는 아래와 같은 환경에서 실행 중입니다.

- Created on 17:39 p.m. May 18, 2021
- OS : Ubuntu 20.04 LTS (GNU/Linux 4.15.0-72-generic x86_64)
- Cpu 모델 : Intel(R) Xeon(R) CPU E5-2686 v4 @ 2.30GHz
- Total Memory: 16396056 kB
- 물리 cpu 개수 : 4		cpu당 물리 코어 : 4		논리 코어 수 : 32



#### 시스템 구성

- jenkins 2.3
  - blueocean : 지속적 배포와 관리 할 수 있는 UI를 지원합니다.
- docker
  - Backend와 Frontend를 컨테이너화합니다.
- docker-compose - jenkins
- DB 서버 : aws s3
- 파일 서버 : aws rds
- WebRTC : openVidu 2.17

최종 빌드와 배포를 위해 jenkins 단계는 제외하고 실행합니다.



#### Ubuntu 버전 업 및 기본 설치

```bash
sudo apt-get update
sudo apt-get install nodejs
sudo apt-get install npm
```



#### docker 설치

frontend와 backend는 각 도커로 서버를 띄우고 있습니다.

```bash
# 필수 패키지 설치
sudo apt-get install apt-transport-https ca-certificates curl gnupg-agent software-properties-common
# GPG Key 인증
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
# docker repository 등록
sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
# 도커 설치
sudo apt-get update && sudo apt-get install docker-ce docker-ce-cli containerd.io
# 시스템 부팅시 도커 시작
sudo systemctl enable docker && service docker start
# 도커 확인
sudo service docker status
```



#### 도커 명령어

- 도커 컨테이너 보는 법
  - sudo docker ps -a
- 도커 컨테이너 삭제
  - sudo docker rm <container_id>
- 도커 이미지 보는 법
  - sudo docker images
- 도커 이미지 삭제
  - sudo docker rmi <image_id>
- 강제 옵션 -f (삭제가 안될 때,)
  - ex) docker rmi -f <image_id>
- 도커 로그 확인
  - docker logs <image_id> : 도커가 꺼져있어도(컨테이너가) 최종적으로 실행된 기록을 가지고 있습니다(오류 잡을 때, 매우 유용)



#### docker 네트워크 설정

같은 Docker Host내에서 실행중인 Container간 연결할 수 있도록 돕는 논리적 **네트워크**같은 개념입니다. 서로 간 통신을 가능하게 합니다. nginx를 통한 front, backend 통신을 위해 설정합니다.

```bash
sudo docker network create thxstorecicdnetwork
```



#### HTTPS 키 발급

frontend에서는 ssl이 적용되어 있기 때문에 HTTPS 인증을 받아야합니다.

```bash
sudo apt-get install letsencrypt
# 만약 nginx를 사용중이면 중지
sudo systemctl stop nginx
# 인증서 발급
sudo letsencrypt certonly --standalone -d www제외한 도메인 이름
# 이메일 쓰고 Agree
# 뉴스레터 no
# 키가 발급되는데 이 두 가지를 써야합니다. 밑의 경로에 각각 하나씩 있습니다.
 ssl_certificate /etc/letsencrypt/live/도메인이름/fullchain.pem; 
 ssl_certificate_key /etc/letsencrypt/live/도메인이름/privkey.pem; 
```



#### Docker 초기화

실행 중인 도커 중, 이름이나 포트가 겹칠 위험이 있기 때문에 중지를 시킵니다.

```bash
# 도커 시작 전, 기존에 실행중인 도커를 멈추고 제거하는 작업.
docker ps -f name=frontend -q | xargs --no-run-if-empty docker container stop
docker ps -f name=backend -q | xargs --no-run-if-empty docker container stop

# 컨테이너 제거
docker container ls -a -f name=frontend -q | xargs -r docker container rm
docker container ls -a -f name=backend -q | xargs -r docker container rm'

# 도커 이미지 제거
docker images -f dangling=true && docker rmi $(docker images -f dangling=true -q)
```



#### frontend Dockerfile 이미지 생성 및 빌드 실행

```bash
docker build -t frontend:latest ./frontend
```

```bash
docker run -d --name frontend -p 80:80 -p 443:443 -v /etc/letsencrypt/live/도메인이름/:/var/jenkins_home/workspace/thxstore-jenkins-cicd/sslkey/ -v /etc/localtime:/etc/localtime:ro --network thxstorecicdnetwork frontend:latest

```

* 여기서 **/etc/letsencrypt/live/도메인이름/** 경로는 SSL 인증 키가 있는 위치입니다. vue.js 빌드와 nginx가 시작됩니다.

  

#### backend Dockerfile 이미지 생성 및 빌드 실행

```bash
docker build -t backend:latest ./backend
```

```
docker run -d --name backend --network thxstorecicdnetwork backend:latest
```

- springboot Gradle Multi Module을 시작합니다. 

---



##   :open_file_folder: 개발 스프린트

|                 스프린트✌                  |                기간📚                | FE🌈                                                          | BE🤖                                                          |
| :----------------------------------------: | :---------------------------------: | ------------------------------------------------------------ | ------------------------------------------------------------ |
|     프로젝트 구상 및 착수 **(v0.0.1)**     | 2021.04.13<br /> ~ <br />2021.04.18 | - 반응형 웹 논의 진행<br />- JEST, Storybook 학습 진행 및 논의<br /> | - Database ERD 작업 진행<br />- REST API 문서 작성<br />- 개발환경 구축<br />- 패키지 구조 설정 |
| 프로젝트 기본 기능 개발<br /> **(v0.1.0)** |  2021.04.19<br />~<br />2021.05.07  | - **박대현**<br/>  - 회원가입, 로그인 페이지 개발<br/>  - 사용자 프로필, 비밀번호 찾기 페이지 개발<br/>  - 가게 정보 페이지 개발<br/>- **성정욱**<br/>  - PrivacyPolicy develop(개인정보처리방침 모달창)<br/>  - AdminPage develop(관리자페이지)<br/>  - StoreEnrollmentPage develop(스토어 신청 페이지)<br/>  - FindPasswordPage develop(비밀번호 찾기)<br/>  - async await/ Flex/ SCSS 학습 및 적용 | - **박상우**<br/>  - THXSTORE Entity configure<br/>  - signUp feature develop<br/>  - multi gradle module configure<br/>  - REST Docs configure<br/>  - Spring Security configure<br/>  - CORS Troubleshooting<br/>  - get social member data feature develop<br/>  - check exists by email feature develop<br/>- **최동식**<br/>  - 서버 인프라 구축<br/>  - 파일 서버 구축 및 연결<br/>  - 자동 빌드 및 배포 설정<br/>  - 스토어 로직 개발<br/>- **황영준**<br/>  - 그래들 멀티 모듈 구성<br/>  - 주문 로직 개발<br/>  - 장바구니 로직 개발 |
| 프로젝트 심화 기능 개발<br />**(v0.2.0)**  |  2021.05.08<br />~<br />2021.05.16  | - **박대현**<br/>  - 판매자 가게 정보 조회 및 수정 기능 개발<br/>  - 판매자 메뉴 그룹, 메뉴 등록/조회/수정/삭제 기능 개발<br/>  - 전체 메뉴 조회 및 타임딜 등록 기능 개발, <br />타임딜 상태에 따른 페이지 접근 제어 기능 개발<br/>  - 예약 조회 및 예약 상태 변경 기능 개발, <br />주문이 들어옴에 따른 알람음 삽입 및 타이머 삽입<br />- **성정욱**<br/>  - 스토어 수정 페이지 생성과 관리자 승인, 반려 모달 추가<br/>  - 사용자용 스토어 페이지 개발<br />(스토어 소개 컴포넌트, 메뉴 컴포넌트, 타임딜 컴포넌트)<br/>  - 스토어등록 시 위도, 경도 좌표 값 계산 <br />(카카오맵 API )<br/>  - 스토어 소개페이지에 사용자 위치와 스토어 위치 값 마커로 표시<br />(카카오맵 API) | - **박상우**<br/>  - 이메일 인증을 통한 비밀번호 찾기<br/>  - 회원 위치정보 수정 기능 개발<br/>  - 회원 기본정보 수정 기능 개발<br/>  - 회원 삭제 기능 개발<br/>  - 회원 중복확인 기능 개발<br/>  - Global Exception Handler 개발<br/>  - REST Docs refactor 문서단위로 설정<br/>- **최동식**<br/>  - multimodule 서버 환경 설정<br/>  - redis 서버 구축<br/>  - 판매자 관점의 스토어 개발<br/>  - 스토어 그룹 관련 CRUD 개발<br/>- **황영준**<br/>  - 주문관련 CRUD 세부사항 개발<br/>  - Pusher 주문 알림 기능 개발<br/>  - 회원 토큰을 통한 권한 인증 개발<br />  - 리뷰,답변, 재고처리 등 추가요소의 개발<br />  - 테스트코드 RestDocs 일부 로직에 적용 |
| 프로젝트 핵심 기능 개발<br />**(v1.0.0)**  |  2021.05.17<br />~<br />2021.05.23  |                                                              |                                                              |



---

## 📜 Project ProgressStatus

| 구분         | 링크                                                         |
| ------------ | ------------------------------------------------------------ |
| Meeting Log👣 | [Meeting Log - wiki](https://github.com/upswp/SSAFY-FINAL-PROJECT/wiki/Meeting-Log) |
| Convention🤙  | [Convention - wiki](https://github.com/upswp/SSAFY-FINAL-PROJECT/wiki/Convention) |
| JIRA🔥        | [SSAFY-JIRA](https://jira.ssafy.com/projects/S04P31B202/summary) |
| GitLab🌟      | [SSAFY-GitLab](https://lab.ssafy.com/s04-final/s04p31b202)   |
| Jenkins🤓     | [SSAFY-Jenkins](http://k4b202.p.ssafy.io:9090/)              |
| REST Docs📚   | [THXSTORE_RESTDocs](https://k4b202.p.ssafy.io/api/docs/index.html) |

- 일부 링크는 보안문제로 열람이 불가능 할 수 있습니다. 
  요청은 (tkddnsos@gmail.com)을 통하여 연락주시면 열람권한 드리겠습니다.